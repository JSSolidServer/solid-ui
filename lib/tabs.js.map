{"version":3,"sources":["../src/tabs.ts"],"names":["ContainerElement","HTMLElement","TabWidgetElement","TabElement","tabWidget","options","subject","dom","document","orientation","parseInt","backgroundColor","flipped","vertical","onClose","getColors","selectedColor","color","bodyMainStyle","rootElement","createElement","setAttribute","navElement","appendChild","mainElement","tabContainer","tabElement","bodyContainer","corners","cornersPrepped","concat","slice","cornersStyle","join","margins","marginsPrepped","marginsStyle","paddingStyle","tabStyle","unselectedStyle","selectedStyle","shownStyle","hiddenStyle","refresh","orderedSync","startEmpty","children","length","selectedTab","selectedTab0","Array","from","map","tab","firstChild","find","dataset","name","selectedTabURI","uri","selectedTab1","clickMe","click","addCancelButton","onCloseSet","existingCancelButton","querySelector","removeChild","extraTab","classList","add","tabCancelButton","getAttribute","getItems","items","ordered","store","the","predicate","elements","each","makeNewSlot","item","ele","div","ellipsis","textContent","onclick","resetTabStyle","resetBodyStyle","bodyTR","bodyMain","getOrCreateContainerElement","renderMain","asSettings","innerHTML","renderTabSettings","renderTab","newBodyMain","slot","i","j","left","right","differ","sameTerm","insertables","newSlot","newBodyDiv","insertBefore","contains","isLight","colorBlend","a","b","mix","ca","cb","res","str","hex","res2","split","h","l","x","total"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AAEA;;;;;;AAEA;AACA;AACA;IACMA,gB;;;;;;;;;;;;;;;;;;;;kDAAyBC,W;;IAoBlBC,gB;;;;;;;;;;;;;;;;;;;;;;kDAAyBD,W;AAMtC;AACA;AACA;;;;;IACME,U;;;;;;;;;;;;;;;;;;;;;kDAAmBF,W;AAKzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,SAASG,SAAT,CAAoBC,OAApB,EAA+C;AACpD,MAAMC,OAAO,GAAGD,OAAO,CAACC,OAAxB;AACA,MAAMC,GAAG,GAAGF,OAAO,CAACE,GAAR,IAAeC,QAA3B;AACA,MAAMC,WAAW,GAAGC,QAAQ,CAACL,OAAO,CAACI,WAAR,IAAuB,GAAxB,CAA5B;AACA,MAAME,eAAe,GAAGN,OAAO,CAACM,eAAR,IAA2B,SAAnD;AACA,MAAMC,OAAO,GAAGH,WAAW,GAAG,CAA9B;AACA,MAAMI,QAAQ,GAAGJ,WAAW,GAAG,CAA/B;AACA,MAAMK,OAAO,GAAGT,OAAO,CAACS,OAAxB;;AAEA,mBAA+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","sourcesContent":["import { cancelButton } from './widgets'\nimport { label } from './utils'\nimport { NamedNode } from 'rdflib'\nimport { store } from 'solid-logic'\n\n/**\n * @ignore\n */\nclass ContainerElement extends HTMLElement {\n  asSettings?: boolean\n}\n\ntype TabWidgetOptions = {\n  backgroundColor?: string;\n  dom?: HTMLDocument;\n  items?: Array<NamedNode>;\n  onClose?: (event: Event) => void;\n  ordered?: boolean;\n  orientation?: '0' | '1' | '2' | '3';\n  predicate?: NamedNode;\n  renderMain?: (bodyMain: HTMLElement, subject: NamedNode) => void;\n  renderTab?: (tabDiv: HTMLButtonElement, subject: NamedNode) => void;\n  renderTabSettings?: (bodyMain: ContainerElement, subject: NamedNode) => void;\n  selectedTab?: NamedNode;\n  startEmpty?: boolean;\n  subject?: NamedNode;\n};\n\nexport class TabWidgetElement extends HTMLElement {\n  bodyContainer?: HTMLElement\n  refresh?: () => void\n  tabContainer?: HTMLElement\n}\n\n/**\n * @ignore\n */\nclass TabElement extends HTMLElement {\n  bodyTR?: HTMLElement\n  subject?: NamedNode\n}\n\n/**\n * Use this widget to generate tabs from triples set in the global store.\n *\n * [Here you can see examples of the tabs](https://solidos.github.io/solid-ui/examples/tabs/).\n *\n * It assumes that items to use for tabs will be in a collection by default,\n * e.g.:\n *\n * ```turtle\n * :subject :predicate ( :item1 :item2 ) .\n * ```\n *\n * You can override this by setting `ordered: false`, in which case it expects\n * unordered triples:\n *\n * ```turtle\n * :subject :predicate :item1, :item 2 .\n * ```\n *\n * Triples that are not ordered in collection are in principle not sorted,\n * which means that tabs could change order every time you render the widget.\n * But in this case the widget will try to sort it in order to keep it\n * consistent.\n *\n * In both of these cases you need to define options `subject` and `predicate`\n * to tell the widget which triples it should be looking for.\n *\n * Finally you can set items manually, using the `items` option, e.g.:\n *\n * ```javascript\n * {\n *   items: [\n *     namedNode('https://domain.tld/#item1'),\n *     namedNode('https://domain.tld/#item2')\n *   ]\n * }\n * ```\n *\n * When you set items manually you do not need to set `subject` and\n * `predicate`.\n *\n * In any case you probably want to set the renderMain option to specify\n * what should be rendered for the various items, e.g.:\n *\n * ```javascript\n * {\n *   renderMain: (bodyMain, subject) => {\n *     bodyMain.innerHTML = renderItem(subject)\n *   }\n * }\n * ```\n *\n * **Note:** `renderItem` is a custom function that you need to define yourself.\n *\n * The option `renderTabSettings` allows you to render a custom view in the\n * body container that is shown when you hold the ALT key and click on a\n * tab. It works very much like the `renderMain` option:\n *\n * ```javascript\n * {\n *   renderTabSettings: (bodyMain, subject) => {\n *     bodyMain.innerHTML = renderTabSettings(subject)\n *   }\n * }\n * ```\n *\n * **Note:** `renderTabSettings` is a custom function that you need to define\n * yourself.\n *\n * By default the widget will try to guess the label by using the\n * [[utils.label]] function. If you want to customize this yourself, you can\n * use the `renderTab` option:\n *\n * ```javascript\n * {\n *   renderTab: (tabDiv, subject) => {\n *     tabDiv.innerText = renderTabText(subject)\n *   }\n * }\n * ```\n *\n * **Note:** `renderTabText` is a custom function you need to define yourself.\n *\n * The option renderTab is also important if you want to set which tab should\n * be selected once the widget is rendered. By default it will simply select\n * the first tab, but you can override by setting `dataset.name` on the tab\n * and referring to the same string in `selectedTab`:\n *\n * ```javascript\n * {\n *   renderTab: (tabDiv, subject)  => {\n *     tabDiv.dataset.name = subject.uri\n *   },\n *   selectedTab: item2.uri\n * }\n * ```\n *\n * You can apply a color to use for tabs and border of the container by using\n * option `background-color`. This is #ddddcc by default.\n *\n * You can override the document object that the widget uses to generate DOM\n * elements by setting the option `dom`. This is encouraged to set if you\n * intend your functionality to be used in environments that don't provide\n * a global `document` object.\n *\n * If you want to render a close button next to the tabs you can set option\n * `onClose` which takes a callback function that is triggered when the\n * button is clicked:\n *\n * ```javascript\n * {\n *   onClose: (event) => {\n *     // do something that hides the widget altogether\n *   }\n * }\n * ```\n *\n * The option `orientation` allows you to set which side the tabs should be\n * located: `'0'` = Top, `'1'` = Left, `'2'` = Bottom, `'3'` = Right\n *\n * If you don't want to render anything in the body container by default,\n * you can set the option `startEmpty` to `true`.\n *\n * @param options\n */\nexport function tabWidget (options: TabWidgetOptions) {\n  const subject = options.subject\n  const dom = options.dom || document\n  const orientation = parseInt(options.orientation || '0')\n  const backgroundColor = options.backgroundColor || '#ddddcc'\n  const flipped = orientation & 2\n  const vertical = orientation & 1\n  const onClose = options.onClose\n\n  const [selectedColor, color] = getColors(backgroundColor)\n  const bodyMainStyle = `flex: 2; width: auto; height: 100%; border: 0.1em; border-style: solid; border-color: ${selectedColor}; padding: 1em;`\n  const rootElement: TabWidgetElement = dom.createElement('div') // 20200117a\n\n  rootElement.setAttribute(\n    'style',\n    'display: flex; height: 100%; width: 100%; flex-direction: ' +\n      (vertical ? 'row' : 'column') +\n      (flipped ? '-reverse;' : ';')\n  )\n\n  const navElement = rootElement.appendChild(dom.createElement('nav'))\n  navElement.setAttribute('style', 'margin: 0;')\n\n  const mainElement = rootElement.appendChild(dom.createElement('main'))\n\n  mainElement.setAttribute('style', 'margin: 0; width:100%; height: 100%;') // override tabbedtab.css\n  const tabContainer = navElement.appendChild(dom.createElement('ul'))\n  tabContainer.setAttribute(\n    'style',\n    `\n    list-style-type: none;\n    display: flex;\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    flex-direction: ${vertical ? 'column' : 'row'}\n  `\n  )\n\n  const tabElement = 'li'\n\n  const bodyContainer = mainElement\n  rootElement.tabContainer = tabContainer\n  rootElement.bodyContainer = bodyContainer\n\n  const corners = ['0.2em', '0.2em', '0', '0'] // top left, TR, BR, BL\n  const cornersPrepped = corners.concat(corners).slice(orientation, orientation + 4)\n  const cornersStyle = `border-radius: ${cornersPrepped.join(' ')};`\n\n  const margins = ['0.3em', '0.3em', '0', '0.3em'] // top, right, bottom, left\n  const marginsPrepped = margins.concat(margins).slice(orientation, orientation + 4)\n  const marginsStyle = `margin: ${marginsPrepped.join(' ')};`\n\n  const paddingStyle = `padding: ${marginsPrepped.join(' ')};`\n\n  const tabStyle = cornersStyle + `position: relative; padding: 0.7em; max-width: 20em; color: ${color};`\n  const unselectedStyle = `${\n    tabStyle + marginsStyle\n  } opacity: 50%; background-color: ${backgroundColor};`\n  const selectedStyle = `${tabStyle + marginsStyle} background-color: ${selectedColor};`\n  const shownStyle = 'height: 100%; width: 100%;'\n  const hiddenStyle = shownStyle + 'display: none;'\n  rootElement.refresh = orderedSync\n  orderedSync()\n\n  if (!options.startEmpty && tabContainer.children.length && options.selectedTab) {\n    const selectedTab0 = Array.from(tabContainer.children) // Version left for compatability with ??\n      .map((tab) => tab.firstChild as HTMLElement)\n      .find((tab) => tab.dataset.name === options.selectedTab)\n\n    const selectedTabURI = options.selectedTab.uri\n    const selectedTab1 = Array.from(tabContainer.children)\n      // @ts-ignore\n      .find(\n        (tab) =>\n          (tab as TabElement).subject &&\n          // @ts-ignore\n          (tab as TabElement).subject.uri &&\n          // @ts-ignore\n          (tab as TabElement).subject.uri === selectedTabURI\n      )\n\n    const tab = selectedTab1 || selectedTab0 || (tabContainer.children[0] as HTMLButtonElement)\n    const clickMe = tab.firstChild\n    // @ts-ignore\n    if (clickMe) clickMe.click()\n  } else if (!options.startEmpty) {\n    (tabContainer.children[0].firstChild as HTMLButtonElement).click() // Open first tab\n  }\n  return rootElement\n\n  function addCancelButton (tabContainer) {\n    if (tabContainer.dataset.onCloseSet) {\n      // @@ TODO: this is only here to make the browser tests work\n      // Discussion at https://github.com/solidos/solid-ui/pull/110#issuecomment-527080663\n      const existingCancelButton = tabContainer.querySelector('.unstyled')\n      tabContainer.removeChild(existingCancelButton)\n    }\n    const extraTab = dom.createElement(tabElement)\n    extraTab.classList.add('unstyled')\n    const tabCancelButton = cancelButton(dom, onClose)\n    tabCancelButton.setAttribute('style', tabCancelButton.getAttribute('style') + paddingStyle)\n    extraTab.appendChild(tabCancelButton)\n    tabContainer.appendChild(extraTab)\n    tabContainer.dataset.onCloseSet = 'true'\n  }\n\n  function getItems (): Array<NamedNode> {\n    if (options.items) return options.items\n    if (options.ordered !== false) {\n      // options.ordered defaults to true\n      return (store.the(subject, options.predicate) as any).elements\n    } else {\n      return store.each(subject, options.predicate) as any\n    }\n  }\n\n  function makeNewSlot (item: NamedNode) {\n    const ele = dom.createElement(tabElement) as TabElement\n    ele.setAttribute('style', unselectedStyle)\n    ele.subject = item\n    const div = ele.appendChild(dom.createElement('button'))\n    div.setAttribute('style', 'background: none; border: none; font: inherit; cursor: pointer')\n    const ellipsis = dom.createElement('button')\n    ellipsis.textContent = '...'\n    ellipsis.setAttribute('style', 'position: absolute; right: 0; bottom: 0; width: 20%; background: none; color: inherit; border: none; padding: 0; font: inherit; cursor: pointer; outline: inherit;')\n\n    div.onclick = function () {\n      resetTabStyle()\n      resetBodyStyle()\n      ele.setAttribute('style', selectedStyle)\n      if (!ele.bodyTR) return\n      ele.bodyTR.setAttribute('style', shownStyle)\n      const bodyMain = getOrCreateContainerElement(ele)\n      if (options.renderMain && ele.subject && bodyMain.asSettings !== false) {\n        bodyMain.innerHTML = 'loading item ...' + item\n        options.renderMain(bodyMain, ele.subject)\n        bodyMain.asSettings = false\n      }\n    }\n    ellipsis.onclick = function () {\n      resetTabStyle()\n      resetBodyStyle()\n      ele.setAttribute('style', selectedStyle)\n      if (!ele.bodyTR) return\n      ele.bodyTR.setAttribute('style', shownStyle)\n      const bodyMain = getOrCreateContainerElement(ele)\n      if (options.renderTabSettings && ele.subject && bodyMain.asSettings !== true) {\n        bodyMain.innerHTML = 'loading settings ...' + item\n        options.renderTabSettings(bodyMain, ele.subject)\n        bodyMain.asSettings = true\n      }\n    }\n\n    if (options.renderTab) {\n      options.renderTab(div, item)\n      ele.appendChild(ellipsis)\n    } else {\n      div.innerHTML = label(item)\n      ele.appendChild(ellipsis)\n    }\n    return ele\n\n    function getOrCreateContainerElement (ele: TabElement): ContainerElement {\n      const bodyMain = ele.bodyTR?.children[0] as ContainerElement\n      if (bodyMain) return bodyMain\n      const newBodyMain = ele.bodyTR!.appendChild(dom.createElement('main'))\n      newBodyMain.setAttribute('style', bodyMainStyle)\n      return newBodyMain\n    }\n  }\n\n  // @@ Use common one from utils?\n  function orderedSync () {\n    const items = getItems()\n    let slot: TabElement, i, j, left, right\n    let differ = false\n    // Find how many match at each end\n    for (left = 0; left < tabContainer.children.length; left++) {\n      slot = tabContainer.children[left] as TabElement\n      if (left >= items.length || (slot.subject && !slot.subject.sameTerm(items[left]))) {\n        differ = true\n        break\n      }\n    }\n    if (!differ && items.length === tabContainer.children.length) {\n      return // The two just match in order: a case to optimize for\n    }\n    for (right = tabContainer.children.length - 1; right >= 0; right--) {\n      slot = tabContainer.children[right] as TabElement\n      j = right - tabContainer.children.length + items.length\n      if (slot.subject && !slot.subject.sameTerm(items[j])) {\n        break\n      }\n    }\n    // The elements left ... right in tabContainer.children do not match\n    const insertables = items.slice(left, right - tabContainer.children.length + items.length + 1)\n    while (right >= left) {\n      // remove extra\n      tabContainer.removeChild(tabContainer.children[left])\n      bodyContainer.removeChild(bodyContainer.children[left])\n      right -= 1\n    }\n    for (i = 0; i < insertables.length; i++) {\n      const newSlot = makeNewSlot(insertables[i])\n      const newBodyDiv = dom.createElement('div')\n      newSlot.bodyTR = newBodyDiv\n      if (left === tabContainer.children.length) {\n        // None left of original on right\n        tabContainer.appendChild(newSlot)\n        bodyContainer.appendChild(newBodyDiv)\n      } else {\n        tabContainer.insertBefore(newSlot, tabContainer.children[left + i])\n        bodyContainer.insertBefore(newBodyDiv, bodyContainer.children[left + i])\n      }\n    }\n    if (onClose) {\n      addCancelButton(tabContainer)\n    }\n  }\n\n  function resetTabStyle () {\n    for (let i = 0; i < tabContainer.children.length; i++) {\n      const tab = tabContainer.children[i]\n      if (tab.classList.contains('unstyled')) {\n        continue\n      } else {\n        tab.setAttribute('style', unselectedStyle)\n      }\n    }\n  }\n\n  function resetBodyStyle () {\n    for (let i = 0; i < bodyContainer.children.length; i++) {\n      bodyContainer.children[i].setAttribute('style', hiddenStyle)\n    }\n  }\n}\n\n/**\n * @internal\n */\nfunction getColors (backgroundColor: string): [string, string] {\n  return isLight(backgroundColor)\n    ? [colorBlend(backgroundColor, '#ffffff', 0.3), '#000000']\n    : [colorBlend(backgroundColor, '#000000', 0.3), '#ffffff']\n}\n\n/**\n * @internal\n */\nfunction colorBlend (a: string, b: string, mix: number): string {\n  let ca, cb, res\n  let str = '#'\n  const hex = '0123456789abcdef'\n  for (let i = 0; i < 3; i++) {\n    ca = parseInt(a.slice(i * 2 + 1, i * 2 + 3), 16)\n    cb = parseInt(b.slice(i * 2 + 1, i * 2 + 3), 16)\n    res = ca * (1.0 - mix) + cb * mix // @@@ rounding\n    const res2 = parseInt(('' + res).split('.')[0]) // @@ ugh\n    const h = parseInt(('' + res2 / 16).split('.')[0]) // @@ ugh\n    const l = parseInt(('' + (res2 % 16)).split('.')[0]) // @@ ugh\n    str += hex[h] + hex[l]\n  }\n  return str\n}\n\n/**\n * @internal\n */\nfunction isLight (x: string): boolean {\n  let total = 0\n  for (let i = 0; i < 3; i++) {\n    total += parseInt(x.slice(i * 2 + 1, i * 2 + 3), 16)\n  }\n  return total > 128 * 3\n}\n"],"file":"tabs.js"}