{"version":3,"file":"index.js","names":["DEFAULT_SOLID_PROJECT_URL","DEFAULT_SOLID_PROJECT_NAME","initFooter","store","options","footer","document","getElementById","pod","getPod","getPodOwner","podOwner","rebuildFooter","authSession","onLogin","onLogout","user","authn","currentUser","innerHTML","createControllerInfoBlock","appendChild","profileLinkContainer","createElement","equals","addStyleClassToElement","podLinkPre","innerText","podLink","href","uri","profileLinkPre","profileLink","getName","solidProjectLinkPre","solidProjectLink","solidProjectUrl","solidProjectName","solidProjectLinkPost"],"sources":["../../src/footer/index.ts"],"sourcesContent":["/*\n    This file was copied from mashlib/src/global/footer.ts file. It is modified to\n    work in solid-ui by adjusting where imported functions are found.\n */\nimport { LiveStore, NamedNode } from 'rdflib'\nimport { authn, authSession } from 'solid-logic'\nimport { addStyleClassToElement, getName, getPod, getPodOwner } from '../utils/headerFooterHelpers'\n\nconst DEFAULT_SOLID_PROJECT_URL = 'https://solidproject.org'\nconst DEFAULT_SOLID_PROJECT_NAME = 'solidproject.org'\n\n/*\n  FooterOptions allow for customizing the link and name of the link part of the footer.\n  */\nexport type FooterOptions = {\n    solidProjectUrl?: string,\n    solidProjectName?: string\n  }\n\n/**\n * Initialize footer component, the footer object returned depends on whether the user is authenticated.\n * @param store the data store\n * @returns the footer\n */\nexport async function initFooter (store: LiveStore, options?: FooterOptions) {\n  const footer = document.getElementById('PageFooter')\n  if (!footer) {\n    return\n  }\n  const pod = getPod()\n  const podOwner = await getPodOwner(pod, store)\n  rebuildFooter(footer, store, pod, podOwner, options)()\n  authSession.onLogin(rebuildFooter(footer, store, pod, podOwner, options))\n  authSession.onLogout(rebuildFooter(footer, store, pod, podOwner, options))\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function rebuildFooter (footer: HTMLElement, store: LiveStore, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions) {\n  return async () => {\n    const user = authn.currentUser()\n    footer.innerHTML = ''\n    footer.appendChild(await createControllerInfoBlock(store, user, pod, podOwner, options))\n  }\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createControllerInfoBlock (store: LiveStore, user: NamedNode | null, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions): HTMLElement {\n  const profileLinkContainer = document.createElement('div')\n  if (!pod || !podOwner || (user && user.equals(podOwner))) {\n    return profileLinkContainer\n  }\n\n  addStyleClassToElement(profileLinkContainer, ['footer-pod-info', 'footer'], 'footer')\n\n  const podLinkPre = document.createElement('span')\n  podLinkPre.innerText = \"You're visiting \"\n\n  const podLink = document.createElement('a')\n  podLink.href = pod.uri\n  podLink.innerText = 'the Pod'\n\n  const profileLinkPre = document.createElement('span')\n  profileLinkPre.innerText = ' controlled by '\n\n  const profileLink = document.createElement('a')\n  profileLink.href = podOwner.uri\n  profileLink.innerText = getName(store, podOwner)\n\n  const solidProjectLinkPre = document.createElement('span')\n  solidProjectLinkPre.innerText = '. For more info, check out '\n\n  const solidProjectLink = document.createElement('a')\n  solidProjectLink.href = options && options.solidProjectUrl ? options.solidProjectUrl : DEFAULT_SOLID_PROJECT_URL\n  solidProjectLink.innerText = options && options.solidProjectName ? options.solidProjectName : DEFAULT_SOLID_PROJECT_NAME\n\n  const solidProjectLinkPost = document.createElement('span')\n  solidProjectLinkPost.innerText = '.'\n\n  profileLinkContainer.appendChild(podLinkPre)\n  profileLinkContainer.appendChild(podLink)\n  profileLinkContainer.appendChild(profileLinkPre)\n  profileLinkContainer.appendChild(profileLink)\n  profileLinkContainer.appendChild(solidProjectLinkPre)\n  profileLinkContainer.appendChild(solidProjectLink)\n  profileLinkContainer.appendChild(solidProjectLinkPost)\n\n  return profileLinkContainer\n}\n"],"mappings":";;;;;;;;;;;;;;;AAKA;;AACA;;+CALA,oJ;;AAOA,IAAMA,yBAAyB,GAAG,0BAAlC;AACA,IAAMC,0BAA0B,GAAG,kBAAnC;AAEA;AACA;AACA;;AAMA;AACA;AACA;AACA;AACA;SACsBC,U;;;AAWtB;AACA;AACA;;;;4FAbO,kBAA2BC,KAA3B,EAA6CC,OAA7C;IAAA;IAAA;MAAA;QAAA;UAAA;YACCC,MADD,GACUC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CADV;;YAAA,IAEAF,MAFA;cAAA;cAAA;YAAA;;YAAA;;UAAA;YAKCG,GALD,GAKO,IAAAC,2BAAA,GALP;YAAA;YAAA,OAMkB,IAAAC,gCAAA,EAAYF,GAAZ,EAAiBL,KAAjB,CANlB;;UAAA;YAMCQ,QAND;YAOLC,aAAa,CAACP,MAAD,EAASF,KAAT,EAAgBK,GAAhB,EAAqBG,QAArB,EAA+BP,OAA/B,CAAb;;YACAS,uBAAA,CAAYC,OAAZ,CAAoBF,aAAa,CAACP,MAAD,EAASF,KAAT,EAAgBK,GAAhB,EAAqBG,QAArB,EAA+BP,OAA/B,CAAjC;;YACAS,uBAAA,CAAYE,QAAZ,CAAqBH,aAAa,CAACP,MAAD,EAASF,KAAT,EAAgBK,GAAhB,EAAqBG,QAArB,EAA+BP,OAA/B,CAAlC;;UATK;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C;;;;AAcA,SAASQ,aAAT,CAAwBP,MAAxB,EAA6CF,KAA7C,EAA+DK,GAA/D,EAAsFG,QAAtF,EAAkHP,OAAlH,EAA2I;EAChJ,gGAAO;IAAA;IAAA;MAAA;QAAA;UAAA;YACCY,IADD,GACQC,iBAAA,CAAMC,WAAN,EADR;YAELb,MAAM,CAACc,SAAP,GAAmB,EAAnB;YAFK,cAGLd,MAHK;YAAA;YAAA,OAGoBe,yBAAyB,CAACjB,KAAD,EAAQa,IAAR,EAAcR,GAAd,EAAmBG,QAAnB,EAA6BP,OAA7B,CAH7C;;UAAA;YAAA;;YAAA,YAGEiB,WAHF;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAP;AAKD;AACD;AACA;AACA;;;AACO,SAASD,yBAAT,CAAoCjB,KAApC,EAAsDa,IAAtD,EAA8ER,GAA9E,EAAqGG,QAArG,EAAiIP,OAAjI,EAAuK;EAC5K,IAAMkB,oBAAoB,GAAGhB,QAAQ,CAACiB,aAAT,CAAuB,KAAvB,CAA7B;;EACA,IAAI,CAACf,GAAD,IAAQ,CAACG,QAAT,IAAsBK,IAAI,IAAIA,IAAI,CAACQ,MAAL,CAAYb,QAAZ,CAAlC,EAA0D;IACxD,OAAOW,oBAAP;EACD;;EAED,IAAAG,2CAAA,EAAuBH,oBAAvB,EAA6C,CAAC,iBAAD,EAAoB,QAApB,CAA7C,EAA4E,QAA5E;EAEA,IAAMI,UAAU,GAAGpB,QAAQ,CAACiB,aAAT,CAAuB,MAAvB,CAAnB;EACAG,UAAU,CAACC,SAAX,GAAuB,kBAAvB;EAEA,IAAMC,OAAO,GAAGtB,QAAQ,CAACiB,aAAT,CAAuB,GAAvB,CAAhB;EACAK,OAAO,CAACC,IAAR,GAAerB,GAAG,CAACsB,GAAnB;EACAF,OAAO,CAACD,SAAR,GAAoB,SAApB;EAEA,IAAMI,cAAc,GAAGzB,QAAQ,CAACiB,aAAT,CAAuB,MAAvB,CAAvB;EACAQ,cAAc,CAACJ,SAAf,GAA2B,iBAA3B;EAEA,IAAMK,WAAW,GAAG1B,QAAQ,CAACiB,aAAT,CAAuB,GAAvB,CAApB;EACAS,WAAW,CAACH,IAAZ,GAAmBlB,QAAQ,CAACmB,GAA5B;EACAE,WAAW,CAACL,SAAZ,GAAwB,IAAAM,4BAAA,EAAQ9B,KAAR,EAAeQ,QAAf,CAAxB;EAEA,IAAMuB,mBAAmB,GAAG5B,QAAQ,CAACiB,aAAT,CAAuB,MAAvB,CAA5B;EACAW,mBAAmB,CAACP,SAApB,GAAgC,6BAAhC;EAEA,IAAMQ,gBAAgB,GAAG7B,QAAQ,CAACiB,aAAT,CAAuB,GAAvB,CAAzB;EACAY,gBAAgB,CAACN,IAAjB,GAAwBzB,OAAO,IAAIA,OAAO,CAACgC,eAAnB,GAAqChC,OAAO,CAACgC,eAA7C,GAA+DpC,yBAAvF;EACAmC,gBAAgB,CAACR,SAAjB,GAA6BvB,OAAO,IAAIA,OAAO,CAACiC,gBAAnB,GAAsCjC,OAAO,CAACiC,gBAA9C,GAAiEpC,0BAA9F;EAEA,IAAMqC,oBAAoB,GAAGhC,QAAQ,CAACiB,aAAT,CAAuB,MAAvB,CAA7B;EACAe,oBAAoB,CAACX,SAArB,GAAiC,GAAjC;EAEAL,oBAAoB,CAACD,WAArB,CAAiCK,UAAjC;EACAJ,oBAAoB,CAACD,WAArB,CAAiCO,OAAjC;EACAN,oBAAoB,CAACD,WAArB,CAAiCU,cAAjC;EACAT,oBAAoB,CAACD,WAArB,CAAiCW,WAAjC;EACAV,oBAAoB,CAACD,WAArB,CAAiCa,mBAAjC;EACAZ,oBAAoB,CAACD,WAArB,CAAiCc,gBAAjC;EACAb,oBAAoB,CAACD,WAArB,CAAiCiB,oBAAjC;EAEA,OAAOhB,oBAAP;AACD"}