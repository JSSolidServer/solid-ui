{"version":3,"sources":["../../src/footer/index.ts"],"names":["DEFAULT_SOLID_PROJECT_URL","DEFAULT_SOLID_PROJECT_NAME","initFooter","store","options","footer","document","getElementById","pod","podOwner","rebuildFooter","authSession","onLogin","onLogout","user","innerHTML","createControllerInfoBlock","appendChild","profileLinkContainer","createElement","equals","podLinkPre","innerText","podLink","href","uri","profileLinkPre","profileLink","solidProjectLinkPre","solidProjectLink","solidProjectUrl","solidProjectName","solidProjectLinkPost"],"mappings":"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","sourcesContent":["/*\n    This file was copied from mashlib/src/global/footer.ts file. It is modified to\n    work in solid-ui by adjusting where imported functions are found.\n */\nimport { IndexedFormula, NamedNode } from 'rdflib'\nimport { authSession, currentUser } from '../authn/authn'\nimport { addStyleClassToElement, getName, getPod, getPodOwner } from '../utils/headerFooterHelpers'\n\nconst DEFAULT_SOLID_PROJECT_URL = 'https://solidproject.org'\nconst DEFAULT_SOLID_PROJECT_NAME = 'solidproject.org'\n\n/*\n  FooterOptions allow for customizing the link and name of the link part of the footer.\n  */\nexport type FooterOptions = {\n    solidProjectUrl?: string,\n    solidProjectName?: string\n  }\n\n/**\n * Initialize footer component, the footer object returned depends on whether the user is authenticated.\n * @param store the data store\n * @returns the footer\n */\nexport async function initFooter (store: IndexedFormula, options?: FooterOptions) {\n  const footer = document.getElementById('PageFooter')\n  if (!footer) {\n    return\n  }\n  const pod = getPod()\n  const podOwner = await getPodOwner(pod, store)\n  rebuildFooter(footer, store, pod, podOwner, options)()\n  authSession.onLogin(rebuildFooter(footer, store, pod, podOwner, options))\n  authSession.onLogout(rebuildFooter(footer, store, pod, podOwner, options))\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function rebuildFooter (footer: HTMLElement, store: IndexedFormula, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions) {\n  return async () => {\n    const user = currentUser()\n    footer.innerHTML = ''\n    footer.appendChild(await createControllerInfoBlock(store, user, pod, podOwner, options))\n  }\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createControllerInfoBlock (store: IndexedFormula, user: NamedNode | null, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions): HTMLElement {\n  const profileLinkContainer = document.createElement('div')\n  if (!pod || !podOwner || (user && user.equals(podOwner))) {\n    return profileLinkContainer\n  }\n\n  addStyleClassToElement(profileLinkContainer, ['footer-pod-info', 'footer'], 'footer')\n\n  const podLinkPre = document.createElement('span')\n  podLinkPre.innerText = \"You're visiting \"\n\n  const podLink = document.createElement('a')\n  podLink.href = pod.uri\n  podLink.innerText = 'the Pod'\n\n  const profileLinkPre = document.createElement('span')\n  profileLinkPre.innerText = ' controlled by '\n\n  const profileLink = document.createElement('a')\n  profileLink.href = podOwner.uri\n  profileLink.innerText = getName(store, podOwner)\n\n  const solidProjectLinkPre = document.createElement('span')\n  solidProjectLinkPre.innerText = '. For more info, check out '\n\n  const solidProjectLink = document.createElement('a')\n  solidProjectLink.href = options && options.solidProjectUrl ? options.solidProjectUrl : DEFAULT_SOLID_PROJECT_URL\n  solidProjectLink.innerText = options && options.solidProjectName ? options.solidProjectName : DEFAULT_SOLID_PROJECT_NAME\n\n  const solidProjectLinkPost = document.createElement('span')\n  solidProjectLinkPost.innerText = '.'\n\n  profileLinkContainer.appendChild(podLinkPre)\n  profileLinkContainer.appendChild(podLink)\n  profileLinkContainer.appendChild(profileLinkPre)\n  profileLinkContainer.appendChild(profileLink)\n  profileLinkContainer.appendChild(solidProjectLinkPre)\n  profileLinkContainer.appendChild(solidProjectLink)\n  profileLinkContainer.appendChild(solidProjectLinkPost)\n\n  return profileLinkContainer\n}\n"],"file":"index.js"}