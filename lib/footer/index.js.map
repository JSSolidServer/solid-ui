{"version":3,"file":"index.js","names":["_solidLogic","require","_headerFooterHelpers","DEFAULT_SOLID_PROJECT_URL","DEFAULT_SOLID_PROJECT_NAME","initFooter","_x","_x2","_initFooter","apply","arguments","_asyncToGenerator2","_regenerator","mark","_callee2","store","options","footer","pod","podOwner","wrap","_callee2$","_context2","prev","next","document","getElementById","abrupt","getPod","getPodOwner","sent","rebuildFooter","authSession","onLogin","onLogout","stop","_callee","user","_callee$","_context","authn","currentUser","innerHTML","t0","createControllerInfoBlock","t1","appendChild","call","profileLinkContainer","createElement","equals","addStyleClassToElement","podLinkPre","innerText","podLink","href","uri","profileLinkPre","profileLink","getName","solidProjectLinkPre","solidProjectLink","solidProjectUrl","solidProjectName","solidProjectLinkPost"],"sources":["../../src/footer/index.ts"],"sourcesContent":["/*\n    This file was copied from mashlib/src/global/footer.ts file. It is modified to\n    work in solid-ui by adjusting where imported functions are found.\n */\nimport { LiveStore, NamedNode } from 'rdflib'\nimport { authn, authSession } from 'solid-logic'\nimport { addStyleClassToElement, getName, getPod, getPodOwner } from '../utils/headerFooterHelpers'\n\nconst DEFAULT_SOLID_PROJECT_URL = 'https://solidproject.org'\nconst DEFAULT_SOLID_PROJECT_NAME = 'solidproject.org'\n\n/*\n  FooterOptions allow for customizing the link and name of the link part of the footer.\n  */\nexport type FooterOptions = {\n    solidProjectUrl?: string,\n    solidProjectName?: string\n  }\n\n/**\n * Initialize footer component, the footer object returned depends on whether the user is authenticated.\n * @param store the data store\n * @returns the footer\n */\nexport async function initFooter (store: LiveStore, options?: FooterOptions) {\n  const footer = document.getElementById('PageFooter')\n  if (!footer) {\n    return\n  }\n  const pod = getPod()\n  const podOwner = await getPodOwner(pod, store)\n  rebuildFooter(footer, store, pod, podOwner, options)()\n  authSession.onLogin(rebuildFooter(footer, store, pod, podOwner, options))\n  authSession.onLogout(rebuildFooter(footer, store, pod, podOwner, options))\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function rebuildFooter (footer: HTMLElement, store: LiveStore, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions) {\n  return async () => {\n    const user = authn.currentUser()\n    footer.innerHTML = ''\n    footer.appendChild(await createControllerInfoBlock(store, user, pod, podOwner, options))\n  }\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createControllerInfoBlock (store: LiveStore, user: NamedNode | null, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions): HTMLElement {\n  const profileLinkContainer = document.createElement('div')\n  if (!pod || !podOwner || (user && user.equals(podOwner))) {\n    return profileLinkContainer\n  }\n\n  addStyleClassToElement(profileLinkContainer, ['footer-pod-info', 'footer'], 'footer')\n\n  const podLinkPre = document.createElement('span')\n  podLinkPre.innerText = \"You're visiting \"\n\n  const podLink = document.createElement('a')\n  podLink.href = pod.uri\n  podLink.innerText = 'the Pod'\n\n  const profileLinkPre = document.createElement('span')\n  profileLinkPre.innerText = ' controlled by '\n\n  const profileLink = document.createElement('a')\n  profileLink.href = podOwner.uri\n  profileLink.innerText = getName(store, podOwner)\n\n  const solidProjectLinkPre = document.createElement('span')\n  solidProjectLinkPre.innerText = '. For more info, check out '\n\n  const solidProjectLink = document.createElement('a')\n  solidProjectLink.href = options && options.solidProjectUrl ? options.solidProjectUrl : DEFAULT_SOLID_PROJECT_URL\n  solidProjectLink.innerText = options && options.solidProjectName ? options.solidProjectName : DEFAULT_SOLID_PROJECT_NAME\n\n  const solidProjectLinkPost = document.createElement('span')\n  solidProjectLinkPost.innerText = '.'\n\n  profileLinkContainer.appendChild(podLinkPre)\n  profileLinkContainer.appendChild(podLink)\n  profileLinkContainer.appendChild(profileLinkPre)\n  profileLinkContainer.appendChild(profileLink)\n  profileLinkContainer.appendChild(solidProjectLinkPre)\n  profileLinkContainer.appendChild(solidProjectLink)\n  profileLinkContainer.appendChild(solidProjectLinkPost)\n\n  return profileLinkContainer\n}\n"],"mappings":"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"}