{"version":3,"file":"index.js","names":["DEFAULT_SOLID_PROJECT_URL","DEFAULT_SOLID_PROJECT_NAME","initFooter","store","options","footer","document","getElementById","pod","getPod","getPodOwner","podOwner","rebuildFooter","authSession","onLogin","onLogout","user","authn","currentUser","innerHTML","createControllerInfoBlock","appendChild","profileLinkContainer","createElement","equals","addStyleClassToElement","podLinkPre","innerText","podLink","href","uri","profileLinkPre","profileLink","getName","solidProjectLinkPre","solidProjectLink","solidProjectUrl","solidProjectName","solidProjectLinkPost"],"sources":["../../src/footer/index.ts"],"sourcesContent":["/*\n    This file was copied from mashlib/src/global/footer.ts file. It is modified to\n    work in solid-ui by adjusting where imported functions are found.\n */\nimport { LiveStore, NamedNode } from 'rdflib'\nimport { authn, authSession } from 'solid-logic'\nimport { addStyleClassToElement, getName, getPod, getPodOwner } from '../utils/headerFooterHelpers'\n\nconst DEFAULT_SOLID_PROJECT_URL = 'https://solidproject.org'\nconst DEFAULT_SOLID_PROJECT_NAME = 'solidproject.org'\n\n/*\n  FooterOptions allow for customizing the link and name of the link part of the footer.\n  */\nexport type FooterOptions = {\n    solidProjectUrl?: string,\n    solidProjectName?: string\n  }\n\n/**\n * Initialize footer component, the footer object returned depends on whether the user is authenticated.\n * @param store the data store\n * @returns the footer\n */\nexport async function initFooter (store: LiveStore, options?: FooterOptions) {\n  const footer = document.getElementById('PageFooter')\n  if (!footer) {\n    return\n  }\n  const pod = getPod()\n  const podOwner = await getPodOwner(pod, store)\n  rebuildFooter(footer, store, pod, podOwner, options)()\n  authSession.onLogin(rebuildFooter(footer, store, pod, podOwner, options))\n  authSession.onLogout(rebuildFooter(footer, store, pod, podOwner, options))\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function rebuildFooter (footer: HTMLElement, store: LiveStore, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions) {\n  return async () => {\n    const user = authn.currentUser()\n    footer.innerHTML = ''\n    footer.appendChild(await createControllerInfoBlock(store, user, pod, podOwner, options))\n  }\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createControllerInfoBlock (store: LiveStore, user: NamedNode | null, pod: NamedNode | null, podOwner: NamedNode | null, options?: FooterOptions): HTMLElement {\n  const profileLinkContainer = document.createElement('div')\n  if (!pod || !podOwner || (user && user.equals(podOwner))) {\n    return profileLinkContainer\n  }\n\n  addStyleClassToElement(profileLinkContainer, ['footer-pod-info', 'footer'], 'footer')\n\n  const podLinkPre = document.createElement('span')\n  podLinkPre.innerText = \"You're visiting \"\n\n  const podLink = document.createElement('a')\n  podLink.href = pod.uri\n  podLink.innerText = 'the Pod'\n\n  const profileLinkPre = document.createElement('span')\n  profileLinkPre.innerText = ' controlled by '\n\n  const profileLink = document.createElement('a')\n  profileLink.href = podOwner.uri\n  profileLink.innerText = getName(store, podOwner)\n\n  const solidProjectLinkPre = document.createElement('span')\n  solidProjectLinkPre.innerText = '. For more info, check out '\n\n  const solidProjectLink = document.createElement('a')\n  solidProjectLink.href = options && options.solidProjectUrl ? options.solidProjectUrl : DEFAULT_SOLID_PROJECT_URL\n  solidProjectLink.innerText = options && options.solidProjectName ? options.solidProjectName : DEFAULT_SOLID_PROJECT_NAME\n\n  const solidProjectLinkPost = document.createElement('span')\n  solidProjectLinkPost.innerText = '.'\n\n  profileLinkContainer.appendChild(podLinkPre)\n  profileLinkContainer.appendChild(podLink)\n  profileLinkContainer.appendChild(profileLinkPre)\n  profileLinkContainer.appendChild(profileLink)\n  profileLinkContainer.appendChild(solidProjectLinkPre)\n  profileLinkContainer.appendChild(solidProjectLink)\n  profileLinkContainer.appendChild(solidProjectLinkPost)\n\n  return profileLinkContainer\n}\n"],"mappings":"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"}