{"version":3,"sources":["../../src/header/index.ts"],"names":["DEFAULT_HELP_MENU_ICON","icons","iconBase","DEFAUL_SOLID_ICON_URL","initHeader","store","userMenuList","options","header","document","getElementById","pod","rebuildHeader","authSession","onLogout","onLogin","user","innerHTML","createBanner","appendChild","podLink","createElement","href","uri","image","src","logo","createUserMenu","createLoginSignUpButtons","userMenu","banner","leftSideOfHeader","helpMenuList","helpMenu","createHelpMenu","helpMenuItems","forEach","menuItem","menuItemType","url","createUserMenuItem","createUserMenuLink","label","target","createUserMenuButton","onclick","setAttribute","helpMenuContainer","helpMenuTrigger","type","helpMenuIcon","helpIcon","throttledMenuToggle","event","toggleMenu","addEventListener","timer","setTimeout","clearTimeout","profileLoginButtonPre","onClick","button","innerText","link","fetcher","load","loggedInMenuList","loggedInMenu","loggedInMenuTrigger","profileImg","getProfileImg","loggedInMenuContainer","child","menuProfileItem","profileUrl","widgets","findImage","emptyProfile","profileImage","style","backgroundImage","trigger","menu","isExpanded","getAttribute","expand","close","toString"],"mappings":"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","sourcesContent":["/* global EventListenerOrEventListenerObject */\n/*\n    This file was copied from mashlib/src/global/header.ts file. It is modified to\n    work in solid-ui by adjusting where imported functions are found.\n */\nimport { IndexedFormula, NamedNode } from 'rdflib'\nimport { icons } from '../iconBase'\nimport { loginStatusBox, authSession, currentUser } from '../authn/authn'\nimport * as widgets from '../widgets'\nimport { emptyProfile } from './empty-profile'\nimport { addStyleClassToElement, getPod, throttle } from '../utils/headerFooterHelpers'\n\n/**\n * menu icons\n*/\nconst DEFAULT_HELP_MENU_ICON = icons.iconBase + 'noun_help.svg'\nconst DEFAUL_SOLID_ICON_URL = 'https://solidproject.org/assets/img/solid-emblem.svg'\n\nexport type MenuItemLink = {\n  label: string,\n  url: string,\n  target?: string\n}\n\nexport type MenuItemButton = {\n  label: string,\n  onclick: () => void\n}\n\nexport type MenuItems = MenuItemLink | MenuItemButton\n\n/*\n  HeaderOptions allow for customizing the logo and menu list.  If a logo is not provided the default\n  is solid. Menulist will always show a link to logout and to the users profile.\n  */\nexport type HeaderOptions = {\n  logo?: string,\n  helpIcon?: string,\n  helpMenuList?: MenuItems[]\n}\n\n/**\n * Initialize header component, the header object returned depends on whether the user is authenticated.\n * @param store the data store\n * @param userMenuList a list of menu items when the user is logged in\n * @param options allow the header to be customized with a personalized logo, help icon and a help menu list of links or buttons.\n * @returns a header for an authenticated user with menu items given or a login screen\n */\nexport async function initHeader (store: IndexedFormula, userMenuList: MenuItems[], options?: HeaderOptions) {\n  const header = document.getElementById('PageHeader')\n  if (!header) {\n    return\n  }\n\n  const pod = getPod()\n  rebuildHeader(header, store, pod, userMenuList, options)()\n  authSession.onLogout(rebuildHeader(header, store, pod, userMenuList, options))\n  authSession.onLogin(rebuildHeader(header, store, pod, userMenuList, options))\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function rebuildHeader (header: HTMLElement, store: IndexedFormula, pod: NamedNode, userMenuList: MenuItems[], options?: HeaderOptions) {\n  return async () => {\n    const user = currentUser()\n    header.innerHTML = ''\n    header.appendChild(await createBanner(store, pod, user, userMenuList, options))\n  }\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport async function createBanner (store: IndexedFormula, pod: NamedNode, user: NamedNode | null, userMenuList: MenuItems[], options?: HeaderOptions): Promise<HTMLElement> {\n  const podLink = document.createElement('a')\n  podLink.href = pod.uri\n  addStyleClassToElement(podLink, ['header-banner__link'])\n  const image = document.createElement('img')\n  if (options) {\n    image.src = options.logo ? options.logo : DEFAUL_SOLID_ICON_URL\n  }\n  addStyleClassToElement(image, ['header-banner__icon'])\n  podLink.appendChild(image)\n\n  const userMenu = user\n    ? await createUserMenu(store, user, userMenuList)\n    : createLoginSignUpButtons()\n\n  const banner = document.createElement('div')\n  addStyleClassToElement(banner, ['header-banner'])\n  banner.appendChild(podLink)\n\n  const leftSideOfHeader = document.createElement('div')\n  addStyleClassToElement(leftSideOfHeader, ['header-banner__right-menu'])\n  leftSideOfHeader.appendChild(userMenu)\n\n  if (options && options.helpMenuList) {\n    const helpMenu = createHelpMenu(options, options.helpMenuList)\n    leftSideOfHeader.appendChild(helpMenu as HTMLDivElement)\n  }\n\n  banner.appendChild(leftSideOfHeader)\n\n  return banner\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createHelpMenu (options: HeaderOptions, helpMenuItems: MenuItems[]) {\n  if (!helpMenuItems) return\n  const helpMenuList = document.createElement('ul')\n  addStyleClassToElement(helpMenuList, ['header-user-menu__list'])\n  helpMenuItems.forEach(function (menuItem) {\n    const menuItemType: string = (menuItem as MenuItemLink).url ? 'url' : 'onclick'\n    if (menuItemType === 'url') {\n      helpMenuList.appendChild(createUserMenuItem(createUserMenuLink(menuItem.label, (menuItem as MenuItemLink).url, (menuItem as MenuItemLink).target)))\n    } else {\n      helpMenuList.appendChild(createUserMenuItem(createUserMenuButton(menuItem.label, (menuItem as MenuItemButton).onclick)))\n    }\n  })\n\n  const helpMenu = document.createElement('nav')\n\n  addStyleClassToElement(helpMenu, ['header-user-menu__navigation-menu'])\n  helpMenu.setAttribute('aria-hidden', 'true')\n  helpMenu.appendChild(helpMenuList)\n\n  const helpMenuContainer = document.createElement('div')\n  addStyleClassToElement(helpMenuContainer, ['header-banner__user-menu'])\n  addStyleClassToElement(helpMenuContainer, ['header-user-menu'])\n  helpMenuContainer.appendChild(helpMenu)\n\n  const helpMenuTrigger = document.createElement('button')\n  addStyleClassToElement(helpMenuTrigger, ['header-user-menu__trigger'])\n  helpMenuTrigger.type = 'button'\n\n  const helpMenuIcon = document.createElement('img')\n  helpMenuIcon.src = (options && options.helpIcon) ? options.helpIcon : icons.iconBase + DEFAULT_HELP_MENU_ICON\n  addStyleClassToElement(helpMenuIcon, ['header-banner__help-icon'])\n  helpMenuContainer.appendChild(helpMenuTrigger)\n  helpMenuTrigger.appendChild(helpMenuIcon)\n\n  const throttledMenuToggle = throttle((event: Event) => toggleMenu(event, helpMenuTrigger, helpMenu), 50)\n  helpMenuTrigger.addEventListener('click', throttledMenuToggle)\n  let timer = setTimeout(() => null, 0)\n  helpMenuContainer.addEventListener('mouseover', event => {\n    clearTimeout(timer)\n    throttledMenuToggle(event)\n  })\n  helpMenuContainer.addEventListener('mouseout', event => {\n    timer = setTimeout(() => throttledMenuToggle(event), 200)\n  })\n\n  return helpMenuContainer\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createLoginSignUpButtons () {\n  const profileLoginButtonPre = document.createElement('div')\n  addStyleClassToElement(profileLoginButtonPre, ['header-banner__login'])\n  profileLoginButtonPre.appendChild(loginStatusBox(document, null, {}))\n  return profileLoginButtonPre\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createUserMenuButton (label: string, onClick: EventListenerOrEventListenerObject): HTMLElement {\n  const button = document.createElement('button')\n  addStyleClassToElement(button, ['header-user-menu__button'])\n  button.addEventListener('click', onClick)\n  button.innerText = label\n  return button\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createUserMenuLink (label: string, href: string, target?: string): HTMLElement {\n  const link = document.createElement('a')\n  addStyleClassToElement(link, ['header-user-menu__link'])\n  link.href = href\n  link.innerText = label\n  if (target) link.target = target\n  return link\n}\n\n/**\n * @ignore exporting this only for the unit test\n */\nexport async function createUserMenu (store: IndexedFormula, user: NamedNode, userMenuList: MenuItems[]): Promise<HTMLElement> {\n  const fetcher = (<any>store).fetcher\n  if (fetcher) {\n    // Making sure that Profile is loaded before building menu\n    await fetcher.load(user)\n  }\n\n  const loggedInMenuList = document.createElement('ul')\n  addStyleClassToElement(loggedInMenuList, ['header-user-menu__list'])\n  if (userMenuList) {\n    userMenuList.forEach(function (menuItem) {\n      const menuItemType: string = (menuItem as MenuItemLink).url ? 'url' : 'onclick'\n      if (menuItemType === 'url') {\n        loggedInMenuList.appendChild(createUserMenuItem(createUserMenuLink(menuItem.label, (menuItem as MenuItemLink).url, (menuItem as MenuItemLink).target)))\n      } else {\n        loggedInMenuList.appendChild(createUserMenuItem(createUserMenuButton(menuItem.label, (menuItem as MenuItemButton).onclick)))\n      }\n    })\n  }\n  const loggedInMenu = document.createElement('nav')\n\n  addStyleClassToElement(loggedInMenu, ['header-user-menu__navigation-menu'])\n  loggedInMenu.setAttribute('aria-hidden', 'true')\n  loggedInMenu.appendChild(loggedInMenuList)\n\n  const loggedInMenuTrigger = document.createElement('button')\n  addStyleClassToElement(loggedInMenuTrigger, ['header-user-menu__trigger'])\n  loggedInMenuTrigger.type = 'button'\n  const profileImg = getProfileImg(store, user)\n  if (typeof profileImg === 'string') {\n    loggedInMenuTrigger.innerHTML = profileImg\n  } else {\n    loggedInMenuTrigger.appendChild(profileImg)\n  }\n\n  const loggedInMenuContainer = document.createElement('div')\n  addStyleClassToElement(loggedInMenuContainer, ['header-banner__user-menu'])\n  addStyleClassToElement(loggedInMenuContainer, ['header-user-menu'])\n  loggedInMenuContainer.appendChild(loggedInMenuTrigger)\n  loggedInMenuContainer.appendChild(loggedInMenu)\n\n  const throttledMenuToggle = throttle((event: Event) => toggleMenu(event, loggedInMenuTrigger, loggedInMenu), 50)\n  loggedInMenuTrigger.addEventListener('click', throttledMenuToggle)\n  let timer = setTimeout(() => null, 0)\n  loggedInMenuContainer.addEventListener('mouseover', event => {\n    clearTimeout(timer)\n    throttledMenuToggle(event)\n  })\n  loggedInMenuContainer.addEventListener('mouseout', event => {\n    timer = setTimeout(() => throttledMenuToggle(event), 200)\n  })\n\n  return loggedInMenuContainer\n}\n\n/**\n * @ignore exporting this only for the unit test\n */\nexport function createUserMenuItem (child: HTMLElement): HTMLElement {\n  const menuProfileItem = document.createElement('li')\n  addStyleClassToElement(menuProfileItem, ['header-user-menu__list-item'])\n  menuProfileItem.appendChild(child)\n  return menuProfileItem\n}\n/**\n * @ignore exporting this only for the unit test\n */\nexport function getProfileImg (store: IndexedFormula, user: NamedNode): string | HTMLElement {\n  let profileUrl = null\n  try {\n    profileUrl = widgets.findImage(user)\n    if (!profileUrl) {\n      return emptyProfile\n    }\n  } catch {\n    return emptyProfile\n  }\n\n  const profileImage = document.createElement('div')\n  addStyleClassToElement(profileImage, ['header-user-menu__photo'])\n  profileImage.style.backgroundImage = `url(${profileUrl})`\n  return profileImage\n}\n\n/**\n * @internal\n */\nfunction toggleMenu (event: Event, trigger: HTMLButtonElement, menu: HTMLElement): void {\n  const isExpanded = trigger.getAttribute('aria-expanded') === 'true'\n  const expand = event.type === 'mouseover'\n  const close = event.type === 'mouseout'\n  if ((isExpanded && expand) || (!isExpanded && close)) {\n    return\n  }\n  trigger.setAttribute('aria-expanded', (!isExpanded).toString())\n  menu.setAttribute('aria-hidden', isExpanded.toString())\n}\n"],"file":"index.js"}