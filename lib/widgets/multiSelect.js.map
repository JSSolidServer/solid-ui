{"version":3,"file":"multiSelect.js","names":["IconicMultiSelect","data","itemTemplate","noData","noResults","placeholder","select","container","tagTemplate","textField","valueField","_data","_itemTemplate","_noData","_noResults","_placeholder","_select","_selectContainer","_tagTemplate","_textField","_valueField","nodeName","length","Error","_options","_getDataFromSettings","_getDataFromSelectTag","_renderMultiselect","_renderOptionsList","_domElements","clear","_multiselect","querySelector","input","optionsContainer","optionsContainerList","options","list","querySelectorAll","find","callbackFn","i","node","undefined","some","_enableEventListenners","_initSelectedList","callback","_event","option","index","html","style","multiselect__selected","value","_processTemplate","text","multiselect__remove_btn","_cross","insertAdjacentHTML","removeBtn","lastElementChild","addEventListener","target","el","dataset","_handleOption","_selectedOptions","classList","remove","setAttribute","multiselect__options","_removeOptionFromList","_handleClearSelectionBtn","_handlePlaceholder","_dispatchEvent","action","selection","_filterOptions","_removeAllArrowSelected","event","document","contains","_closeList","_clearSelection","add","multiselect__options_visible","e","_handleArrows","_handleBackspace","_handleEnter","isOpen","valueLowerCase","toLowerCase","textContent","substring","appendChild","parentNode","removeChild","hasResults","_showNoResults","result","characters","charactersLength","charAt","Math","floor","random","arr","item","push","selected","hasAttribute","isValueFieldValid","isTextFieldValid","keyCode","preventDefault","firstElementChild","multiselect__options_ul_li_arrow_selected","scrollIntoView","ArrowUp","Up","ArrowDown","Down","multiselect__options_ul_li","key","children","_scrollIntoView","lastSelectedOption","targetLastSelectedOption","display","dispatchEvent","splice","multiselect__options_selected","_addOptionToList","hasItemsSelected","template","processedTemplate","objAttr","match","map","replace","attr","className","optionDom","multiselect__options_ul","join","_showNoData","id","_generateId","createElement","multiselect__container","multiselect__wrapper","multiselect__input","multiselect__clear_btn","innerHTML","parent","child","rectParent","getBoundingClientRect","rectChild","top","bottom","offsetHeight","scrollTop","clientHeight","offsetTop","condition","multiselect__options_ul_p_multiselect__options_no_data","dom","multiselect__options_ul_p_multiselect__options_no_results"],"sources":["../../src/widgets/multiSelect.js"],"sourcesContent":["/*\n * IconicMultiSelect v0.7.0\n * Licence:  MIT\n * (c) 2021 Sidney Wimart.\n * repo & configuration: https://github.com/sidneywm/iconic-multiselect\n */\n\n/**\n * @version IconicMultiSelect v0.7.0\n * @licence  MIT\n */\nimport * as style from '../style_multiSelect'\n\nexport class IconicMultiSelect {\n  _data\n  _domElements\n  _event = () => {}\n  _itemTemplate\n  _multiselect\n  _noData\n  _noResults\n  _options = []\n  _placeholder\n  _select\n  _selectContainer\n  _selectedOptions = []\n  _tagTemplate\n  _textField\n  _valueField\n  _cross = `\n    <svg\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z\"\n        fill=\"currentColor\"\n      />\n    </svg>\n    `\n\n  /**\n   * Iconic Multiselect constructor.\n   * @param { Object[] } data - Array of objects.\n   * @param { string } noData - Defines the message when there is no data input.\n   * @param { string } noResults - Defines the message when there is no result if options are filtered.\n   * @param { string } placeholder -  Defines the placeholder's text.\n   * @param { string } select - DOM element to be selected. It must be a HTML Select tag - https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select\n   * @param { string } textField - Field to select in the object for the text.\n   * @param { string } valueField - Field to select in the object for the value.\n   */\n  constructor ({ data, itemTemplate, noData, noResults, placeholder, select, container, tagTemplate, textField, valueField }) {\n    this._data = data ?? []\n    this._itemTemplate = itemTemplate ?? null\n    this._noData = noData ?? 'No data found.'\n    this._noResults = noResults ?? 'No results found.'\n    this._placeholder = placeholder ?? 'Select...'\n    this._select = select\n    // Timea added a container here\n    this._selectContainer = container\n    this._tagTemplate = tagTemplate ?? null\n    this._textField = textField ?? null\n    this._valueField = valueField ?? null\n  }\n\n  /**\n   * Initialize the Iconic Multiselect component.\n   * @public\n   */\n  init () {\n    // Timea change to use this._select instead of this._selectContainer\n    if (this._select && this._select.nodeName === 'SELECT') {\n      if (this._itemTemplate && this._data.length === 0) { throw new Error('itemTemplate must be initialized with data from the component settings') }\n      if (this._tagTemplate && this._data.length === 0) { throw new Error('tagTemplate must be initialized with data from the component settings') }\n\n      this._options = this._data.length > 0 ? this._getDataFromSettings() : this._getDataFromSelectTag()\n\n      this._renderMultiselect()\n      this._renderOptionsList()\n\n      this._domElements = {\n        clear: this._multiselect.querySelector('.multiselect__clear-btn'),\n        input: this._multiselect.querySelector('.multiselect__input'),\n        optionsContainer: this._multiselect.querySelector('.multiselect__options'),\n        optionsContainerList: this._multiselect.querySelector('.multiselect__options > ul'),\n        options: {\n          list: this._multiselect.querySelectorAll('.multiselect__options > ul > li'),\n          find: function (callbackFn) {\n            for (let i = 0; i < this.list.length; i++) {\n              const node = this.list[i]\n              if (callbackFn(node)) return node\n            }\n            return undefined\n          },\n          some: function (callbackFn) {\n            for (let i = 0; i < this.list.length; i++) {\n              const node = this.list[i]\n              if (callbackFn(node, i)) return true\n            }\n            return false\n          }\n        }\n      }\n\n      this._enableEventListenners()\n      this._initSelectedList()\n    } else {\n      throw new Error(`The selector '${this._select}' did not select any valid select tag.`)\n    }\n  }\n\n  /**\n   * Subscribes to the emitted events.\n   * @param { Function } callback - Callback function which emits a custom event object.\n   * @public\n   */\n  subscribe (callback) {\n    if (typeof callback === 'function') {\n      this._event = callback\n    } else {\n      throw new Error('parameter in the subscribe method is not a function')\n    }\n  }\n\n  /**\n   * Add an option to the selection list.\n   * @param { Object: { text: string; value: string; }} option\n   * @private\n   */\n  _addOptionToList (option, index) {\n    const html = `<span class=\"multiselect__selected\" style=\"${style.multiselect__selected}\" data-value=\"${option.value}\">${\n      this._tagTemplate ? this._processTemplate(this._tagTemplate, index) : option.text\n    }<span class=\"multiselect__remove-btn\" style=\"${style.multiselect__remove_btn}\">${this._cross}</span></span>`\n\n    this._domElements.input.insertAdjacentHTML('beforebegin', html)\n\n    const { lastElementChild: removeBtn } = this._multiselect.querySelector(`span[data-value=\"${option.value}\"]`)\n    removeBtn.addEventListener('click', () => {\n      const target = this._domElements.options.find((el) => el.dataset.value === option.value)\n      this._handleOption(target)\n    })\n  }\n\n  /**\n   * Clears all selected options.\n   * @private\n   */\n  _clearSelection () {\n    for (let i = 0; i < this._selectedOptions.length; i++) {\n      const option = this._selectedOptions[i]\n      const target = this._domElements.options.find((el) => el.dataset.value === option.value)\n      target.classList.remove('multiselect__options--selected')\n      target.setAttribute('style', style.multiselect__options)\n      this._removeOptionFromList(target.dataset.value)\n    }\n    this._selectedOptions = []\n    this._handleClearSelectionBtn()\n    this._handlePlaceholder()\n    this._dispatchEvent({\n      action: 'CLEAR_ALL_OPTIONS',\n      selection: this._selectedOptions\n    })\n  }\n\n  /**\n   * Close the options container.\n   * @private\n   */\n  _closeList () {\n    this._domElements.input.value = ''\n    this._domElements.optionsContainer.classList.remove('visible')\n    this._domElements.optionsContainer.setAttribute('style', style.multiselect__options)\n    this._filterOptions('')\n    this._removeAllArrowSelected()\n  }\n\n  /**\n   * Dispatches new events.\n   * @param { object : { action: string; selection: { option: string; text: string; }[]; value?: string; } } event\n   * @private\n   */\n  _dispatchEvent (event) {\n    this._event(event)\n  }\n\n  /**\n   * Enables all main event listenners.\n   * @private\n   */\n  _enableEventListenners () {\n    document.addEventListener('mouseup', ({ target }) => {\n      if (!this._multiselect.contains(target)) {\n        this._filterOptions('')\n        this._closeList()\n        this._handlePlaceholder()\n      }\n    })\n\n    this._domElements.clear.addEventListener('click', () => {\n      this._clearSelection()\n    })\n\n    for (let i = 0; i < this._domElements.options.list.length; i++) {\n      const option = this._domElements.options.list[i]\n      option.addEventListener('click', ({ target }) => {\n        this._handleOption(target)\n        this._closeList()\n      })\n    }\n\n    this._domElements.input.addEventListener('focus', () => {\n      this._domElements.optionsContainer.classList.add('visible')\n      this._domElements.optionsContainer.setAttribute('style', style.multiselect__options_visible)\n    })\n\n    this._domElements.input.addEventListener('input', ({ target: { value } }) => {\n      if (this._domElements.options.list.length > 0) {\n        this._filterOptions(value)\n      }\n    })\n\n    this._domElements.input.addEventListener('keydown', (e) => {\n      this._handleArrows(e)\n      this._handleBackspace(e)\n      this._handleEnter(e)\n    })\n  }\n\n  /**\n   * Filters user input.\n   * @param { string } value\n   * @private\n   */\n  _filterOptions (value) {\n    const isOpen = this._domElements.optionsContainer.classList.contains('visible')\n    const valueLowerCase = value.toLowerCase()\n\n    if (!isOpen && value.length > 0) {\n      this._domElements.optionsContainer.classList.add('visible')\n      this._domElements.optionsContainer.setAttribute('style', style.multiselect__options_visible)\n    }\n\n    if (this._domElements.options.list.length > 0) {\n      for (let i = 0; i < this._domElements.options.list.length; i++) {\n        const el = this._domElements.options.list[i]\n        const text = this._itemTemplate ? this._data[i][this._textField] : el.textContent\n\n        if (text.toLowerCase().substring(0, valueLowerCase.length) === valueLowerCase) {\n          this._domElements.optionsContainerList.appendChild(el)\n        } else {\n          el.parentNode && el.parentNode.removeChild(el)\n        }\n      }\n\n      const hasResults = this._domElements.options.some(\n        (el, index) =>\n          (this._itemTemplate ? this._data[index][this._textField] : el.textContent)\n            .toLowerCase()\n            .substring(0, valueLowerCase.length) === valueLowerCase\n      )\n      this._showNoResults(!hasResults)\n    }\n  }\n\n  _generateId (length) {\n    let result = ''\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n    const charactersLength = characters.length\n    for (let i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n    return result\n  }\n\n  /**\n   * Gets data from select tag.\n   * @private\n   */\n  _getDataFromSelectTag () {\n    const arr = []\n    const { options } = this._select\n    for (let i = 0; i < options.length; i++) {\n      const item = options[i]\n      arr.push({\n        text: item.text,\n        value: item.value,\n        selected: item.hasAttribute('selected')\n      })\n    }\n    return arr\n  }\n\n  /**\n   * Gets data from settings.\n   * @private\n   */\n  _getDataFromSettings () {\n    if (this._data.length > 0 && this._valueField && this._textField) {\n      const isValueFieldValid = typeof this._valueField === 'string'\n      const isTextFieldValid = typeof this._textField === 'string'\n      const arr = []\n\n      if (!isValueFieldValid || !isTextFieldValid) {\n        throw new Error('textField and valueField must be of type string')\n      }\n\n      for (let i = 0; i < this._data.length; i++) {\n        const item = this._data[i]\n        arr.push({\n          value: item[this._valueField],\n          text: item[this._textField],\n          selected: typeof item.selected === 'boolean' ? item.selected : false\n        })\n      }\n      return arr\n    } else {\n      return null\n    }\n  }\n\n  /**\n   * Handles Arrow up & Down. Selection of an option is also possible with these keys.\n   * @param { Event } event\n   * @private\n   */\n  _handleArrows (event) {\n    if (event.keyCode === 40 || event.keyCode === 38) {\n      event.preventDefault()\n      const isOpen = this._domElements.optionsContainer.classList.contains('visible')\n      // An updated view of the container is needed because of the filtering option\n      const optionsContainerList = this._multiselect.querySelector('.multiselect__options > ul')\n\n      if (!isOpen) {\n        this._domElements.optionsContainer.classList.add('visible')\n        this._domElements.optionsContainer.setAttribute('style', style.multiselect__options_visible)\n        optionsContainerList.firstElementChild.classList.add('arrow-selected')\n        optionsContainerList.firstElementChild.setAttribute('style', style.multiselect__options_ul_li_arrow_selected)\n        optionsContainerList.firstElementChild.scrollIntoView(false)\n      } else {\n        let selected = this._multiselect.querySelector('.multiselect__options ul li.arrow-selected')\n        const action = {\n          ArrowUp: 'previous',\n          Up: 'previous',\n          ArrowDown: 'next',\n          Down: 'next'\n        }\n\n        if (!selected) {\n          optionsContainerList.firstElementChild.classList.add('arrow-selected')\n          optionsContainerList.firstElementChild.setAttribute('style', style.multiselect__options_ul_li_arrow_selected)\n          optionsContainerList.firstElementChild.scrollIntoView(false)\n          return\n        }\n\n        selected.classList.remove('arrow-selected')\n        selected.setAttribute('style', style.multiselect__options_ul_li)\n\n        selected = selected[action[event.key] + 'ElementSibling']\n\n        // Go to start or end of the popup list\n        if (!selected) {\n          selected =\n          optionsContainerList.children[action[event.key] === 'next' ? 0 : optionsContainerList.children.length - 1]\n          selected.classList.add('arrow-selected')\n          selected.setAttribute('style', style.multiselect__options_ul_li_arrow_selected)\n          this._scrollIntoView(optionsContainerList, selected)\n          return\n        }\n\n        selected.classList.add('arrow-selected')\n        selected.setAttribute('style', style.multiselect__options_ul_li_arrow_selected)\n        this._scrollIntoView(optionsContainerList, selected)\n      }\n    }\n  }\n\n  /**\n   * Handles the backspace key event - Deletes the preceding option in the selection list.\n   * @param { Event } e\n   * @private\n   */\n  _handleBackspace (e) {\n    if (e.keyCode === 8 && e.target.value === '') {\n      const lastSelectedOption =\n        this._selectedOptions.length > 0 ? this._selectedOptions[this._selectedOptions.length - 1] : null\n\n      if (lastSelectedOption) {\n        const targetLastSelectedOption = this._multiselect.querySelector(\n          `li[data-value=\"${lastSelectedOption.value}\"]`\n        )\n        this._handleOption(targetLastSelectedOption)\n\n        if (this._selectedOptions.length === 0) {\n          this._domElements.optionsContainer.classList.remove('visible')\n          this._domElements.optionsContainer.setAttribute('style', style.multiselect__options)\n        }\n      }\n    }\n  }\n\n  /**\n   * Shows clear selection button if some options are selected.\n   * @private\n   */\n  _handleClearSelectionBtn () {\n    if (this._selectedOptions.length > 0) {\n      this._domElements.clear.style.display = 'flex'\n    } else {\n      this._domElements.clear.style.display = 'none'\n    }\n  }\n\n  /**\n   * Handles the enter key event.\n   * @param { Event } event\n   * @private\n   */\n  _handleEnter (event) {\n    if (event.keyCode === 13) {\n      const selected = this._multiselect.querySelector('.multiselect__options ul li.arrow-selected')\n      if (selected) {\n        this._handleOption(selected)\n        this._closeList()\n      }\n    }\n  }\n\n  _handleOption (target, dispatchEvent = true) {\n    // Remove\n    for (let i = 0; i < this._selectedOptions.length; i++) {\n      const el = this._selectedOptions[i]\n      if (el.value === target.dataset.value) {\n        target.classList.remove('multiselect__options--selected')\n        target.setAttribute('style', style.multiselect__options)\n        this._selectedOptions.splice(i, 1)\n        this._removeOptionFromList(target.dataset.value)\n        this._handleClearSelectionBtn()\n        this._handlePlaceholder()\n\n        return (\n          dispatchEvent &&\n          this._dispatchEvent({\n            action: 'REMOVE_OPTION',\n            value: target.dataset.value,\n            selection: this._selectedOptions\n          })\n        )\n      }\n    }\n\n    // Add\n    for (let i = 0; i < this._options.length; i++) {\n      const option = this._options[i]\n      if (option.value === target.dataset.value) {\n        target.classList.add('multiselect__options--selected')\n        target.setAttribute('style', style.multiselect__options_selected)\n        this._selectedOptions = [...this._selectedOptions, option]\n        this._addOptionToList(option, i)\n        this._handleClearSelectionBtn()\n        this._handlePlaceholder()\n\n        return (\n          dispatchEvent &&\n          this._dispatchEvent({\n            action: 'ADD_OPTION',\n            value: target.dataset.value,\n            selection: this._selectedOptions\n          })\n        )\n      }\n    }\n  }\n\n  /**\n   * Shows the placeholder if no options are selected.\n   * @private\n   */\n  _handlePlaceholder () {\n    this._domElements.input.placeholder = this._placeholder\n  }\n\n  _initSelectedList () {\n    let hasItemsSelected = false\n\n    for (let i = 0; i < this._options.length; i++) {\n      const option = this._options[i]\n      if (option.selected) {\n        hasItemsSelected = true\n        const target = this._domElements.options.find((el) => el.dataset.value === option.value)\n        target.classList.add('multiselect__options--selected')\n        target.setAttribute('style', style.multiselect__options_selected)\n        this._selectedOptions = [...this._selectedOptions, option]\n        this._addOptionToList(option, i)\n      }\n    }\n\n    if (hasItemsSelected) { this._handleClearSelectionBtn() }\n    this._handlePlaceholder()\n  }\n\n  /**\n   * Process the custom template.\n   * @param { string } template\n   * @private\n   */\n  _processTemplate (template, index) {\n    let processedTemplate = template\n    const objAttr = template.match(/\\$\\{(\\w+)\\}/g).map((e) => e.replace(/\\$\\{|\\}/g, ''))\n\n    for (let i = 0; i < objAttr.length; i++) {\n      const attr = objAttr[i]\n      // eslint-disable-next-line no-useless-escape\n      processedTemplate = processedTemplate.replace(`\\$\\{${attr}\\}`, this._data[index][attr] ?? '')\n    }\n\n    return processedTemplate\n  }\n\n  _removeAllArrowSelected () {\n    const className = 'arrow-selected'\n    const target = this._domElements.options.find((el) => el.classList.contains(className))\n    target && target.classList.remove(className) && target.setAttribute('style', style.multiselect__options_ul_li)\n  }\n\n  /**\n   * Removes an option from the list.\n   * @param { string } value\n   * @private\n   */\n  _removeOptionFromList (value) {\n    const optionDom = this._multiselect.querySelector(`span[data-value=\"${value}\"]`)\n    optionDom && optionDom.parentNode && optionDom.parentNode.removeChild(optionDom)\n  }\n\n  /**\n   * Renders the multiselect options list view.\n   * @private\n   */\n  _renderOptionsList () {\n    const html = `\n        <div class=\"multiselect__options\" style=\"${style.multiselect__options}\">\n          <ul style=\"${style.multiselect__options_ul}\">\n          ${\n            this._options.length > 0 && !this._itemTemplate\n              ? this._options\n                  .map((option) => {\n                    return `\n              <li data-value=\"${option.value}\" style=\"${style.multiselect__options_ul_li}\">${option.text}</li>\n            `\n                  })\n                  .join('')\n              : ''\n          }\n\n          ${\n            this._options.length > 0 && this._itemTemplate\n              ? this._options\n                  .map((option, index) => {\n                    return `\n              <li data-value=\"${option.value}\" style=\"${style.multiselect__options_ul_li}\">${this._processTemplate(this._itemTemplate, index)}</li>\n            `\n                  })\n                  .join('')\n              : ''\n          }\n          ${this._showNoData(this._options.length === 0)}\n          </ul>\n        </div>\n      `\n\n    this._multiselect.insertAdjacentHTML('beforeend', html)\n  }\n\n  /**\n   * Renders the multiselect view.\n   * @private\n   */\n  _renderMultiselect () {\n    this._select.style.display = 'none'\n    const id = 'iconic-' + this._generateId(20)\n    // Timea created dedicated div element because previous code was not rendering\n    this._multiselect = document.createElement('div')\n    this._multiselect.setAttribute('id', id)\n    this._multiselect.setAttribute('class', 'multiselect__container')\n    this._multiselect.setAttribute('style', style.multiselect__container)\n    const html = `\n        <div class=\"multiselect__wrapper\" style=\"${style.multiselect__wrapper}\">\n          <input class=\"multiselect__input\" style=\"${style.multiselect__input}\" placeholder=\"${this._placeholder}\" />\n        </div>\n        <span style=\"display: none;\" class=\"multiselect__clear-btn\" style=\"${style.multiselect__clear_btn}\">${this._cross}</span>\n    `\n    this._multiselect.innerHTML = html\n    this._selectContainer.appendChild(this._multiselect)\n  }\n\n  /**\n   * ScrollIntoView - This small utility reproduces the behavior of .scrollIntoView({ block: \"nearest\", inline: \"nearest\" })\n   * This is for IE compatibility without a need of a polyfill\n   * @private\n   */\n  _scrollIntoView (parent, child) {\n    const rectParent = parent.getBoundingClientRect()\n    const rectChild = child.getBoundingClientRect()\n\n    // Detect if not visible at top and then scroll to the top\n    if (!(rectParent.top < rectChild.bottom - child.offsetHeight)) {\n      parent.scrollTop = child.clientHeight + (child.offsetTop - child.offsetHeight)\n    }\n\n    // Detect if not visible at bottom and then scroll to the bottom\n    if (!(rectParent.bottom > rectChild.top + child.offsetHeight)) {\n      parent.scrollTop =\n        child.clientHeight +\n        (child.offsetTop - child.offsetHeight) -\n        (parent.offsetHeight - (child.offsetHeight + (child.offsetHeight - child.clientHeight)))\n    }\n  }\n\n  /**\n   * Shows a no data message.\n   * @param { boolean } condition\n   * @private\n   */\n  _showNoData (condition) {\n    return condition ? `<p class=\"multiselect__options--no-data\" style=\"${style.multiselect__options_ul_p_multiselect__options_no_data}\">${this._noData}</p>` : ''\n  }\n\n  /**\n   * Shows a no results message.\n   * @param { boolean } condition\n   * @private\n   */\n  _showNoResults (condition) {\n    const dom = this._multiselect.querySelector('.multiselect__options--no-results')\n    if (condition) {\n      const html = `<p class=\"multiselect__options--no-results\" style=\"${style.multiselect__options_ul_p_multiselect__options_no_results}\">${this._noResults}</p>`\n      !dom && this._domElements.optionsContainerList.insertAdjacentHTML('beforeend', html)\n    } else {\n      dom && dom.parentNode && dom.parentNode.removeChild(dom)\n    }\n  }\n}\n"],"mappings":"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"}